<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>付款資訊</title>
    @@include('./layout/style.html')
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    </head>


<body>
    <!-- 以下Header區域 -->
    @@include('./layout/header.html',{
    cart:'active'
    })
    <!-- 以下是top button -->
    @@include('./layout/topBtn.html')

    <!-- 以下可以開始編輯 -->

    
    
    <div class="payment_container">

        <div class="cart_bread">
                    <ul>
                        <li>
                            <!-- <img src="./image/cart/cart.jpg" alt="">
                            <img src="./image/cart/form.jpg" alt="">
                            <img src="./image/cart/done.jpg" alt=""> -->
                            <i class="cart_icons_cart">shopping_cart</i>
                        </li>
                        <li>
                            <i class="cart_icons_description">assignment</i>
                        </li>
                        <li>
                            <i class="cart_icons_credit_card">credit_card</i>
                        </li>
                    </ul>
        </div>

        <div class="payment_left">

            <div class="payment_section1">
                <form action="process_payment.php" method="post">
                    <h4>會員人資料</h4>
                    <span class="payment_line"></span> 
                    <ul>
                        <li>
                            <input type="text" id="payment_full_name" name="full_name" required placeholder="請輸入名字">
                        </li>
                        <li>
                            <input type="email" id="payment_email" name="email" required placeholder="請輸入電子信箱">
                        </li>
                        <li>
                            <input type="tel" id="phone" name="phone" required placeholder="請輸入手機號">
                        </li>
                    </ul>
                </form>
            </div>

            <div class="payment_section1">
                <h4>付款方式</h4>
                <span class="payment_line"></span> 
                <form action="process_payment.php" method="post">
                    <ul>
                        <li>
                        <input type="text" id="payment_card_number" name="card_number" required placeholder="信用卡卡號">
                        </li>
                        <li>
                        <input type="text" id="payment_expiry_date" name="expiry_date" required placeholder="有效期限">
                        </li>
                        <li>
                        <input type="text" id="cvv" name="cvv" required placeholder="CVC">
                        </li>
                    </ul>
                </form>
            </div>
        
            <div class="payment_section3">
            <form action="process_payment.php" method="post">
              <h4>電子發票</h4>
              <span class="payment_line"></span> 

              <ul>
                <li>
                    <input type="radio" id="payment_option1" name="choices" value="option1">
                    <label for="option1">電子信箱</label>
                </li>                
                <li>
                  <input id="payment_email" name="billing_address" required placeholder="電子信箱"></input>
                </li>
                <li>
                    <input type="radio" id="payment_option1" name="choices" value="option1">
                    <label for="option1">郵寄地址</label>
                </li>
                <li>
                  <textarea lock id="payment_shipping_address" name="shipping_address" required placeholder="郵寄地址" ></textarea>
                </li>
              </ul>
            </form>
            </div>
        </div>

<!-- right side of the page -->
        <div class="payment_right">

            <div class="payment_side">
                <form action="process_payment.php" method="post">
                  <h4>項目</h4>
                  <span class="payment_line"></span> 
                  <ul>
                    <li>
                      <div class="payment_side_inner">

                        <div class="payment_cart_item">
                          <div class="payment_item_info">
                            <ul>
                                <li>                         
                                     <img src="./image/payment/tokiyo5.png" alt="Product Image">
                                </li>
                                <li>                            
                                    <h5>『日本』東京輕漫遊5天</h5>
                                    <div class="payment_item_remove">
                                        <button>Remove</button>
                                    </div>
                                </li>
                                <li>                          
                                    <div class="payment_item_price">
                                    <span>$21000</span></li>

                            </ul>

                            <ul>
                                <li>                         
                                     <img src="./image/payment/disney1.png" alt="Product Image">
                                </li>
                                <li>                            
                                    <h5>『日本』東京輕漫遊5天</h5>
                                    <div class="payment_item_remove">
                                        <button>Remove</button>
                                    </div>
                                </li>
                                <li>                          
                                    <div class="payment_item_price">
                                    <span>$21000</span>
                                </li>

                            </ul>

                        </div>

                      </div>
                    </li>
                    <li class="payment_select">
                      <select id="payment_coupon" name="請選擇優惠卷">
                        <option value="" disabled selected>請選擇優惠卷</option>
                        <option value="coupon1">Coupon 1</option>
                        <option value="coupon2">Coupon 2</option>
                        <option value="coupon3">Coupon 3</option>
                      </select>
                    </li>
                    
                    <span class="payment_line"></span> 

                    <li class="payment_price_selection">
                        <label for="payment_total_amount">金額</label>
                        <span id="payment_total_amount"></span>
                    </li>


                    <li class="payment_price_selection">
                        <label for="payment_discount_amount">折扣金額</label>
                      <span id="payment_discount_amount"></span>
                    </li>

                    <span class="payment_line"></span> 

                    <li class="payment_price_selection">
                        <label for="payment_total_price">折扣後總價</label>
                      <span id="payment_total_price"></span>
                    </li>

                    <li>
                      <form action="done.html" method="post" href="done.html">

                          <a href="done.html">
                                 <input type="submit" value="立即付款" href="done.html">
      
                              </a>
                    </form>
                    </li>
                  </ul>
                </form>
              </div>
              


        </div>

    </div>


    <!-- 以下Footer區域 -->
    @@include('./layout/footer.html')

    <!-- 以下共用外接js區域 -->
    @@include('./layout/js.html')

    <script>
        // Function to calculate the values
        function calculateTotal() {
        // Get all the item prices
        let itemPrices = document.querySelectorAll('.payment_item_price span');

        // Calculate the total price
        let totalPrice = 0;
        for (var i = 0; i < itemPrices.length; i++) {
            totalPrice += parseFloat(itemPrices[i].textContent.slice(1));
        }

        // Get the selected coupon option
        let couponSelect = document.getElementById('payment_coupon');
        let selectedCoupon = couponSelect.options[couponSelect.selectedIndex].value;

        // Perform the calculation based on the selected coupon
        let discountAmount = 0;
        if (selectedCoupon === 'coupon1') {
            discountAmount = 500;
        } else if (selectedCoupon === 'coupon2') {
            discountAmount = 1000;
        } else if (selectedCoupon === 'coupon3') {
            discountAmount = 1500;
        }

        // Calculate the total price after the discount
        let totalPriceAfterDiscount = totalPrice - discountAmount;

        // Update the display
        document.getElementById('payment_total_amount').textContent = '$' + totalPrice;
        document.getElementById('payment_discount_amount').textContent = '$' + discountAmount;
        document.getElementById('payment_total_price').textContent = '$' + totalPriceAfterDiscount;
        }

        // Call the calculateTotal function to initially calculate the values
        calculateTotal();

        // Add event listener to the coupon select element
        document.getElementById('payment_coupon').addEventListener('change', calculateTotal);


      </script>
      
</body>

</html>